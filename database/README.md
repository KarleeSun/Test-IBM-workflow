# Database
## Index

- [Database Structure](#database-structure)
- [Using MongoDB](#using-mongodb)


# Database Structure
## Structure of the database
The database is named vetDB that consist of 4 collections:
### **accounts**
This is the collection of accounts that was registred and approved. This is also the collection used to verify login details. This collection consists of the following fields:
```
firstName: String,
lastName: String,
universityEmail: String,
studentNumber: String,
course: String,
password: String,
type: String
```
Note that the *universityEmail* field is the primary key, and should be used for login.
### **placements**
This is the collection of placements that were registered and approved. Administrators could manage this collection through the *placement management* web page. This collection consists of the following fields
```
  id: Number,
  placementType: String,
  animalType: String,
  provider: String,
  address: String,
  county: String,
  postcode: String,
  country: String,
  contactName: String,
  positionAtPractice: String,
  email: String,
  phoneNumber: String,
  website: String,
  accommodation: Boolean,
  spaExpiryDate: String,
  notes: String
  ```
Note that the *id* field is the primary key. Any newly applied placement should have a unique *id*, this could be done by fetching the largest *id* in the placements collection and incrementing it by one.

### **providerApplications**
This is the collection to store provider applications. All the request made through the multi-step form will be stored in this collection. Administrators will be able to access the application and accept it or reject it. Accepting an application will move the placement information to the *placements* collection, rejecting the application will simply remove the application from this collection. This collection consists of the following fields:
```
  id: Number,
  placementType: String,
  animalType: String,
  provider: String,
  address: String,
  county: String,
  postcode: String,
  country: String,
  contactName: String,
  positionAtPractice: String,
  email: String,
  phoneNumber: String,
  website: String,
  accommodation: Boolean,
  spaExpiryDate: String,
  notes: String
  ```
  Note that the *id* field is the primary key and should be unique, and it should be automatically generated by the server when an application is submitted by the user.

### **registrations**
This is the collection to store all the registration requests. Administrator could either approve or dissaprove any requests through *regesitration dashboard*. Approved requests will move to the *accounts* collection, and dissaproved requests will be simply removed. This collection consists of the following fields:
```
  firstName: String,
  lastName: String,
  studentNumber: String,
  universityEmail: String,
  course: String,
  password: String,
  type: String
  ```
Note that the *universityEmail* field is the primary key. All new registration request will automatically check if there is an existing registration request or account with the same *universityEmail* before stored to this collection.

# Using MongoDB
## Access to Database
Data has been imported into MongoDB Cloud Storage and can be accessed [here](https://cloud.mongodb.com/v2/63e7f4a52697e25938758da5#/clusters)

## Connet to Database with MongoDB Compass
1. Copy the connecting string
``` 
mongodb+srv://admin:<password>@vetdb.qbxlez2.mongodb.net/test
```
2. Open MongoDB Compass, paste the link and connect with username and password. Username and password can be found in our [Teams Channel](https://teams.microsoft.com/l/message/19:kD9JZgPCO-yciViRfptWrRPxQhGde4Olv5El45aVVjc1@thread.tacv2/1676146520261?tenantId=b2e47f30-cd7d-4a4e-a5da-b18cf1a4151b&groupId=7b6559fc-2be2-45a1-8fe8-d81ab7357730&parentMessageId=1676146520261&teamName=grp-SPE%20Project%2039%20VetDB&channelName=%E5%B8%B8%E8%A7%84&createdTime=1676146520261&allowXTenantAccess=false)

## Connect to Database with Mongoose
We use Mongoose to connect to the database in the backend. A documentation for Mongoose can be found [here](https://mongoosejs.com/docs/).